set(SHOGUN_CORE_GRAPH_HEADERS
	${CMAKE_CURRENT_SOURCE_DIR}/Allocator.h
	${CMAKE_CURRENT_SOURCE_DIR}/Graph.h
	${CMAKE_CURRENT_SOURCE_DIR}/LinalgNodes.h
	${CMAKE_CURRENT_SOURCE_DIR}/OperatorImplementation.h
	${CMAKE_CURRENT_SOURCE_DIR}/Shape.h
	${CMAKE_CURRENT_SOURCE_DIR}/Tensor.h
	${CMAKE_CURRENT_SOURCE_DIR}/Types.h
	${CMAKE_CURRENT_SOURCE_DIR}/operator_list.h
	${CMAKE_CURRENT_SOURCE_DIR}/ops/Add.h
	${CMAKE_CURRENT_SOURCE_DIR}/ops/Input.h
	)

set(SHOGUN_CORE_GRAPH_SOURCES
	${CMAKE_CURRENT_SOURCE_DIR}/Graph.cpp
	${CMAKE_CURRENT_SOURCE_DIR}/Tensor.cpp
	${CMAKE_CURRENT_SOURCE_DIR}/operator_list.cpp
	)

set(SHOGUN_GRAPH_IMPLEMENTATION_HEADERS
	${CMAKE_CURRENT_SOURCE_DIR}/ops/shogun/Add.h
	${CMAKE_CURRENT_SOURCE_DIR}/ops/shogun/Input.h
	)
set(SHOGUN_GRAPH_IMPLEMENTATION_SOURCES
	${CMAKE_CURRENT_SOURCE_DIR}/ops/shogun/Operators.cpp
	)

# set(NGRAPH_GRAPH_IMPLEMENTATION_HEADERS
# 	ops/ngraph/Add.h
# 	)
# set(NGRAPH_GRAPH_IMPLEMENTATION_SOURCES
# 	ops/ngraph/Add.cpp
# 	)

add_library(shogun-graph SHARED ${SHOGUN_GRAPH_HEADERS}
	${SHOGUN_GRAPH_SOURCES}
	${SHOGUN_CORE_GRAPH_SOURCES}
	${SHOGUN_CORE_GRAPH_HEADERS}
	${SHOGUN_GRAPH_IMPLEMENTATION_HEADERS}
	${SHOGUN_GRAPH_IMPLEMENTATION_SOURCES}
	)

# add_library(shogun-graph-ngraph SHARED ${SHOGUN_GRAPH_HEADERS}
# 	${SHOGUN_GRAPH_SOURCES}
#   ${SHOGUN_CORE_GRAPH_SOURCES}
#   ${SHOGUN_CORE_GRAPH_HEADERS}
# 	${NGRAPH_GRAPH_IMPLEMENTATION_HEADERS}
# 	${NGRAPH_GRAPH_IMPLEMENTATION_SOURCES})


target_link_libraries(shogun-graph shogun-core)
set_property(TARGET shogun-graph PROPERTY POSITION_INDEPENDENT_CODE TRUE)
set_target_properties(
  shogun-graph PROPERTIES
  VERSION ${LIBSHOGUNVER}
  SOVERSION ${LIBSHOGUNSO}
  INTERFACE_shogun_MAJOR_VERSION ${SHOGUN_VERSION_MAJOR}
  LIBRARY_OUTPUT_DIRECTORY ${PROJECT_BINARY_DIR}/src/shogun)
set_property(TARGET shogun-graph APPEND PROPERTY COMPATIBLE_INTERFACE_STRING ${SHOGUN_VERSION_MAJOR})

IF (ENABLE_TESTING)
	set(SHOGUN_TEST_LINK_LIBS shogun_test_main shogun-graph)

	ADD_SHOGUN_TEST(Graph_test)
ENDIF()
